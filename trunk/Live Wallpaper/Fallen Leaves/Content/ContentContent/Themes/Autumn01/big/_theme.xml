<?xml version="1.0" encoding="utf-8" ?>
<!-- Файл темы, в которых описаны разные сцены из одних и тех же картинок, расположенных в той же папке. -->
<theme title="Fallen Leaves One">

    <!-- Шаблоны для разных элементов, в которых прописаны типовые свойства.  -->
    <!-- Можно применять во всех сценах в пределах темы. -->
    <!-- Должен иметь уникальный id в пределах типа -->
    <patterns>

        <!-- Шаблон ветера 1 -->
        <!-- changeSpeedPeriod - для ветра случайным образом меняется ускорение в течении периода этого периода. Чем больше, тем реже будет менятся ускорение ветра. -->
        <!-- maxSpeedFactor - соотношение между максимальной силой ветра, его максимальной скоростью и максимальным ускорением. Т.е. чем больше, тем медленее меняется скорость -->
        <!-- minAmplitude, maxAmplitude - для ветра устанавливаются предельные стабильные значения его амплитуды (от 0 до 1). -->
        <!-- amplitureScatter - предел случайного разброса стабильной амплитуды ветра при каждом его изменении -->
        <!-- minChangeAmplitudePeriod, maxChangeAmplitudePeriod - пределы того, как часто меняются пределы стабильной амплитуды ветра.  -->
        <!-- amplitudeStep - как быстро скорость ветра будет стремиться к стабильному значению -->
        <wind id="wind1"
            changeSpeedPeriod="1500" maxSpeedFactor="200"
            minAmplitude="0.1" maxAmplitude=".7" amplitureScatter = ".3"
            minChangeAmplitudePeriod="200" maxChangeAmplitudePeriod="700" amplitudeStep="0.005"
        />

        <!-- Шаблон ветра, наследующийся от wind1. Более резко стабилизируется -->
        <wind id="wind1_fast" pattern="wind1" amplitudeStep="0.02" />

        <!-- Шаблон ветки дерева. -->
        <!-- Параметры качания: -->
        <!--     maxAngle - максимальный (почти) угол отклонения -->
        <!--     K0 - коэф-т изменения угола наклона в зависимости от силы ветра. Не влияет на колебания -->
        <!--     K1 - коэф-т изменения угла наклона  в зависимости от силы ветра. Но он влияет на колебания -->
        <!--     K2 - коэф-т реакции на изменение ветра (проявляется при резких перепадах -->
        <!--     K3 - коэф-т случайных колебаний (максимальный, в меняется случайным образом через случайный период) -->
        <!--     K3p - максимальный период, в который проявляется случайные колебация -->
        <!--     K4 - коэф-т затухания колебаний -->
        <!--     K5 - коэф-т упругости - чем больше, тем быстрее ветка возвращается к начальному положению -->

        <treeNode id="trunk1" maxAngle=".55" 
            K0=".0015" K0w=".00003" K0p="50" K1="0.00002" K2=".0005"
            minK3="0.000015" maxK3="0.000025" minK3p="500" maxK3p="900" K4=".015" K5=".0004" />
        <treeNode id="stick1" maxAngle=".55" 
            K0=".0015" K0w=".00003" K0p="50" K1="0.00004" K2=".0005"
            minK3="0.000015" maxK3="0.000025" minK3p="300" maxK3p="500" K4=".015" K5=".0004" />
        <treeNode id="leafs1" maxAngle=".55" 
            K0=".0015" K0w=".00003" K0p="50" K1="0.00008" K2=".0002"
            minK3="0.000015" maxK3="0.000025" minK3p="150" maxK3p="200" K4=".01"  K5=".0002" />

        <!-- Шаблон травы. -->
        <!-- minRotation, maxRotation - пределы случайного изменения начального угла наклона каждой травинки -->
        <!-- K0w, K0p - амплитуда и период волны колебаний (что проходит по траве через весь экран) -->
        <!-- minK3, maxK3, minK3p, maxK3p - определяют на случайные колебания с амплитудой minK3..maxK3 и с периодом minK3p..maxK3p -->
        <!-- minK1 .. maxK5 - аналогичные параметры, как и для ветви, но указываются пределы, по которым случайно задаются параметры K1..K5 для каждой травинки -->
        <!-- Дополнительные параметры качания:  -->
        <grass id="grass1"
            minRotation="-.175" maxRotation=".45"
            maxAngle=".45"
            K0=".5" K0w=".004" K0p ="40"
            minK1 = ".00015" minK2 = ".15" minK3 = ".00025" minK3p="100" minK4 = ".022" minK5 = ".025"
            maxK1 = ".00025" maxK2 = ".25" maxK3 = ".00035" maxK3p="150" maxK4 = ".026" maxK5 = ".035"
        />
    </patterns>

    <!-- Сцена первая. id сцены должен быть уникальным в пределах темы -->
    <!-- width - это общая ширина темы. Единица изменения - наибольший размер экрана (т.е. ширина в Lanscape-режиме) -->
    <!-- dragSlowing - уровень инерции при прокрутке - чем он больше, тем медленней экран будет останавливаться при отпускании пальца  -->
    <!-- Элементы сцены рисуются в том же порядке, что и прописаны в файле -->
    <scene id="scene01" width="4" dragSlowing=".9">

        <!-- Небо. -->
        <!-- textures - текстуры неба (картинки в формате xnb, расположенные в папке темы). Перечисляются слева-направо, сверху вниз (первым идёт верний ряд). -->
        <!-- rowCount - количество строк текстур -->
        <!-- width (ширина) - аналогично ширине сцены. Т.е. при прокрутке сцены от начала и до конца небо будет занимать 1.5 экрана. -->
        <sky textures="back1,back2,back3,back4" width="1.5" rowCount="2" />

        <!-- Облако. Параметры left, right, top - отступы слева, справа, сверху от краёв сцены -->
        <cloud textures="big_clouds1" width=".5" left=".75" top=".125" right=".75" />

        <!-- Ветер -->
        <wind pattern="wind1"/>

        <!-- Земля -->
        <!-- repeatX - сколько раз текстуры земли будут повторяться в прелах указанной ширины -->
        <ground textures="land1,land2" width="4" repeatX="6">
            <!-- Трава -->
            <!-- textures - перечень текстур травинок. Желательно одного размера. При генерации травы выбираются случайным образом -->
            <!-- pattern - id шаблона, описанного выше в секции <patterns>.  -->
            <!-- density - плотность трацы (кол-во травинок в пределах экрана) -->
            <!-- begin - координаты точки начала травинки (на текстуре). Считается от левого верхнего угла текстуры -->
            <!-- minScale, maxScale - пределы случайного изменения масштаба травы при её генерации. Размерность - ширина экрана. Или высота... -->
            <grass pattern="grass1" textures="grass1a, grass1b, grass1c"
                density="100" begin="12,120" minScale="0.075" maxScale="0.1" />
            <grass pattern="grass1" textures="grass2, grass3, grass4, grass5"
                density="100" begin="32,125" minScale="0.09" maxScale="0.15" />
        </ground>

        <!-- Дерево -->
        <!-- baseHeight - общая высота текстур дерева. Т.к. текстур много, указывается вручную -->
        <tree width="0.5" left="1.8" right="1.7" baseHeight="1024">
            <!-- Ветка (ствол) -->
            <!-- texture - текстура ветки -->
            <!-- begin - координаты точки начала ветки (на текстуре). Считается от левого верхнего угла текстуры -->
            <treeNode pattern="trunk1" texture="tree1" begin="775, 890">
                <!-- Ветка (левая) -->
                <!-- parent - координаты точки корневой текстуры (tree1), к которой крепится эта ветка -->
                <!-- end - координаты точки конца ветки (на текстуре). Считается от левого верхнего угла текстуры -->
                <treeNode pattern="stick1" texture="stick1" parent="310, 385" begin="785, 125" end="145,195" />
                <!-- Ветка (левая) -->
                <treeNode pattern="stick1" texture="stick2" parent="310, 385" begin="490, 235" end="65,140" />
                <!-- Ветка (листья сверху) -->
                <treeNode pattern="leafs1" texture="leafs1" parent="460, 490" begin="565, 725" end="390,390" />
                <!-- Ветка (листья справа) -->
                <treeNode pattern="leafs1" texture="stick3" parent="685, 515" begin="220, 450" end="335,100" />
            </treeNode>
        </tree>

    </scene>
</theme>
