<?xml version="1.0" encoding="utf-8" ?>
<!-- Файл темы, в которых описаны разные сцены из одних и тех же картинок, расположенных в той же папке. -->
<theme title="Fallen Leaves One">

    <!-- Шаблоны для разных элементов, в которых прописаны типовые свойства.  -->
    <!-- Можно применять во всех сценах в пределах темы. -->
    <!-- Должен иметь уникальный id в пределах типа -->
    <patterns>

        <!-- Шаблон ветера 1 -->
        <!-- changeSpeedPeriod - для ветра случайным образом меняется ускорение в течении периода этого периода. Чем больше, тем реже будет менятся ускорение ветра. -->
        <!-- maxSpeedFactor - соотношение между максимальной силой ветра, его максимальной скоростью и максимальным ускорением. Т.е. чем больше, тем медленее меняется скорость -->
        <!-- minAmplitude, maxAmplitude - для ветра устанавливаются предельные стабильные значения его амплитуды (от 0 до 1). -->
        <!-- amplitureScatter - предел случайного разброса стабильной амплитуды ветра при каждом его изменении -->
        <!-- minChangeAmplitudePeriod, maxChangeAmplitudePeriod - пределы того, как часто меняются пределы стабильной амплитуды ветра.  -->
        <!-- amplitudeStep - как быстро скорость ветра будет стремиться к стабильному значению -->
        <wind id="wind1"
            changeSpeedPeriod="1500" maxSpeedFactor="200"
            minAmplitude="0.1" maxAmplitude=".7" amplitureScatter=".3"
            minChangeAmplitudePeriod="200" maxChangeAmplitudePeriod="700" amplitudeStep="0.005"
        />
        <wind id="wind1_max" pattern="wind1"
            changeSpeedPeriod="10000" maxSpeedFactor="20"
            minAmplitude="1" maxAmplitude="1" amplitureScatter="0"
            minChangeAmplitudePeriod="10000"  amplitudeStep="1000" />

        <!-- Шаблон ветра, наследующийся от wind1. Более резко стабилизируется -->
        <wind id="wind1_fast" pattern="wind1" amplitudeStep="0.02" />

        <clouds id="whiteClouds" textures="cloud01,cloud02,cloud03,cloud04,cloud05,cloud06,cloud07,cloud08,cloud09,cloud10"
            width="2" baseHeight="256" minScale=".5" maxScale="1" />
        <clouds id="grayClouds" textures="cloud21,cloud22,cloud23,cloud24,cloud25"
            width="2" baseHeight="256" minScale=".5" maxScale="1" />
        <clouds id="darkClouds" textures="cloud31,cloud32,cloud33,cloud34,cloud35"
            width="2" baseHeight="256" minScale=".5" maxScale="1" />

        <ground id="land5" textures="land5" repeatX="7" heights="85,45,90,170,170,170,170,160,170,115,78,108,170,195,185,128" />
        <ground id="land6" textures="land6" repeatX="7" heights="175,200,200,189,177,144,84,112,176,202,180,144,156,190,208,209" />

        <!-- Шаблон ветки дерева, -->
        <!-- Параметры качания: -->
        <!--     maxAngle - максимальный (почти) угол отклонения -->
        <!--     K0 - коэф-т изменения угола наклона в зависимости от силы ветра. Не влияет на колебания -->
        <!--     K1 - коэф-т изменения угла наклона  в зависимости от силы ветра. Но он влияет на колебания -->
        <!--     K2 - коэф-т реакции на изменение ветра (проявляется при резких перепадах -->
        <!--     K3 - коэф-т случайных колебаний (максимальный, в меняется случайным образом через случайный период) -->
        <!--     K3p - максимальный период, в который проявляется случайные колебация -->
        <!--     K4 - коэф-т затухания колебаний -->
        <!--     K5 - коэф-т упругости - чем больше, тем быстрее ветка возвращается к начальному положению -->
        <treeNode id="trunk1" maxAngle=".55" 
            K0=".0015" K0w=".00003" K0p="50" K1="0.00002" K2=".0005"
            minK3="0.000015" maxK3="0.000025" minK3p="500" maxK3p="900" K4=".015" K5=".0004" />
        <treeNode id="stick1" maxAngle=".55" 
            K0=".0015" K0w=".00003" K0p="50" K1="0.00004" K2=".0005"
            minK3="0.000015" maxK3="0.000025" minK3p="300" maxK3p="500" K4=".015" K5=".0004" />
        <treeNode id="leafs1" maxAngle=".55" 
            K0=".0015" K0w=".00003" K0p="50" K1="0.00008" K2=".0002"
            minK3="0.000015" maxK3="0.000025" minK3p="150" maxK3p="200" K4=".01"  K5=".0002" />
        <treeNode id="leafs2" maxAngle=".25"
            K0=".0015" K0w=".00003" K0p="50" K1="0.00008" K2=".0002"
            minK3="0.000015" maxK3="0.000025" minK3p="150" maxK3p="200" K4=".01"  K5=".0002" />

        <fallenLeafs id="fallenLeafs1" textures="leaf1,leaf2,leaf3,leaf4,leaf5"
            minScale=".015" maxScale=".020" speedX="6" speedY="4" 
            minAngleSpeed=".03" maxAngleSpeed=".06" minSwirlRadius="10" maxSwirlRadius="150" 
            opacity=".75" windage=".75" enterOpacityPeriod="40" enterRadius="40"
        />
        <fallenLeafs id="fallenLeafs2" textures="leaf11,leaf12,leaf13"
            minScale=".013" maxScale=".016" speedX="6" speedY="4" 
            minAngleSpeed=".03" maxAngleSpeed=".06" minSwirlRadius="10" maxSwirlRadius="100" 
            opacity=".75" windage=".85" enterOpacityPeriod="40" enterRadius="60"
        />


        <!-- Шаблон травы. -->
        <!-- minRotation, maxRotation - пределы случайного изменения начального угла наклона каждой травинки -->
        <!-- K0w, K0p - амплитуда и период волны колебаний (что проходит по траве через весь экран) -->
        <!-- minK3, maxK3, minK3p, maxK3p - определяют на случайные колебания с амплитудой minK3..maxK3 и с периодом minK3p..maxK3p -->
        <!-- minK1 .. maxK5 - аналогичные параметры, как и для ветви, но указываются пределы, по которым случайно задаются параметры K1..K5 для каждой травинки -->
        <!-- Дополнительные параметры качания:  -->
        <grass id="grass1"
            minRotation="-.175" maxRotation=".45" maxAngle=".45"
            opacity="1"
            K0="0" K0w=".004" K0p ="15"
            minK1 = ".004" minK2 = ".15" minK3 = ".00055" minK3p="4" minK4 = ".022" minK5 = ".025"
            maxK1 = ".006" maxK2 = ".25" maxK3 = ".00075" maxK3p="6" maxK4 = ".026" maxK5 = ".035"
        />
    </patterns>

    <!-- Сцена первая. id сцены должен быть уникальным в пределах темы -->
    <!-- width - это общая ширина темы. Единица изменения - наибольший размер экрана (т.е. ширина в Lanscape-режиме) -->
    <!-- dragSlowing - уровень инерции при прокрутке - чем он больше, тем медленней экран будет останавливаться при отпускании пальца  -->
    <!-- Элементы сцены рисуются в том же порядке, что и прописаны в файле -->
    <scene id="scene01" width="4" dragSlowing=".9">

        <!-- Небо. -->
        <!-- textures - текстуры неба (картинки в формате xnb, расположенные в папке темы). Перечисляются слева-направо, сверху вниз (первым идёт верний ряд). -->
        <!-- rowCount - количество строк текстур -->
        <!-- width (ширина) - аналогично ширине сцены. Т.е. при прокрутке сцены от начала и до конца небо будет занимать 1.5 экрана. -->
        <sky textures="back04" width="1.5" />

        <!-- Облака. Параметры left, right, top - отступы слева, справа, сверху от краёв сцены -->
        <clouds pattern="grayClouds" density="4" speed=".3" top="-.3" bottom="0.8" minScale=".3" maxScale=".5" opacity=".8" />
        <clouds pattern="grayClouds" density="4" speed=".5" top="-.5" bottom="0.9" minScale=".7" maxScale=".7" />

        <!-- Ветер -->
        <wind pattern="wind1"/>

        <!-- Земля -->
        <!-- repeatX - сколько раз текстуры земли будут повторяться в прелах указанной ширины -->
        <!--<ground textures="land1,land2" width="4" repeatX="6">-->
        <ground pattern="land6" width="4" >
            <!-- Трава -->
            <!-- textures - перечень текстур травинок. Желательно одного размера. При генерации травы выбираются случайным образом -->
            <!-- pattern - id шаблона, описанного выше в секции <patterns>.  -->
            <!-- density - плотность травы (кол-во травинок в пределах экрана) -->
            <!-- begin - координаты точки начала травинки (на текстуре). Считается от левого верхнего угла текстуры -->
            <!-- minScale, maxScale - пределы случайного изменения масштаба травы при её генерации. Размерность - ширина экрана. Или высота... -->
            <grass pattern="grass1" textures="grass1a, grass1b, grass1c"
                density="100" begin="12,120" minScale="0.075" maxScale="0.1" />
            <grass pattern="grass1" textures="grass2, grass3, grass4, grass5"
                density="100" begin="32,125" minScale="0.09" maxScale="0.15" />
        </ground>

        <!-- Дерево -->
        <!-- baseHeight - общая высота текстур дерева. Т.к. текстур много, указывается вручную -->
        <tree width="0.5" left="1.5" right="2.0" bottom="0.04" baseHeight="1024" opacity="1" >
            <fallenLeafs pattern="fallenLeafs1" enterPoint="-120, 200" maxEnterCount="20" />
            <!-- Ветка (ствол) -->
            <!-- texture - текстура ветки -->
            <!-- begin - координаты точки начала ветки (на текстуре). Считается от левого верхнего угла текстуры -->
            <treeNode pattern="trunk1" texture="tree01_tree1" begin="775, 890" opacity=".93">
                <!-- Ветка (левая) -->
                <!-- parent - координаты точки корневой текстуры (tree1), к которой крепится эта ветка -->
                <!-- end - координаты точки конца ветки (на текстуре). Считается от левого верхнего угла текстуры -->
                <treeNode pattern="stick1" texture="tree01_stick1" parent="310, 385" begin="785, 125" end="145,195" />
                <!-- Ветка (левая) -->
                <treeNode pattern="stick1" texture="tree01_stick2" parent="310, 385" begin="490, 235" end="65,140" />
                <!-- Ветка (листья сверху) -->
                <treeNode pattern="leafs1" texture="tree01_leafs1" parent="460, 490" begin="565, 725" end="390,390" />
                <!-- Ветка (листья справа) -->
                <treeNode pattern="leafs1" texture="tree01_stick3" parent="685, 515" begin="220, 450" end="335,100" />
            </treeNode>
        </tree>

        <tree width="0.5" left="1.8" right="1.7" bottom="0.03" baseHeight="1400">
            <fallenLeafs pattern="fallenLeafs2" enterPoint="50, 150" maxEnterCount="40" />
            <treeNode pattern="trunk1" texture="tree02_tree2" begin="150, 960">
                <treeNode pattern="stick1" texture="tree02_stick3" parent="233, 740" begin="845, 885" end="625, 470" />
                <treeNode pattern="stick1" texture="tree02_stick6" parent="395, 555" begin="305, 875" end="404, 745">
                    <treeNode pattern="stick1" texture="tree02_stick5" parent="600, 600" begin="88, 67" end="140,135" />    
                </treeNode>
                <treeNode pattern="leafs2" texture="tree02_leafs" parent="290, 380" begin="590, 765" end="465, 140" />
            </treeNode>
        </tree>

    </scene>


    <scene id="scene02" width="4" dragSlowing=".9">

        <sky textures="back02a" width="1.5" stretch="true" />

        <clouds pattern="whiteClouds" density="3" speed=".5" top="-.15" bottom="0.5" minScale="0.2" maxScale=".5" />

        <wind pattern="wind1"/>

        <ground pattern="land6" width="4" >
            <grass pattern="grass1" textures="grass1a, grass1b, grass1c"
                density="100" begin="12,120" minScale="0.075" maxScale="0.1" />
            <grass pattern="grass1" textures="grass2, grass3, grass4, grass5"
                density="100" begin="32,125" minScale="0.09" maxScale="0.15" />
        </ground>

        <tree width="0.5" left="2.2" right="1.3" bottom="0.04" baseHeight="1024">
            <fallenLeafs pattern="fallenLeafs1" enterPoint="-120, 200" maxEnterCount="20" />
            <treeNode pattern="trunk1" texture="tree01_tree1" begin="775, 890" opacity=".93">
                <treeNode pattern="stick1" texture="tree01_stick1" parent="310, 385" begin="785, 125" end="145,195" />
                <treeNode pattern="stick1" texture="tree01_stick2" parent="310, 385" begin="490, 235" end="65,140" />
                <treeNode pattern="leafs1" texture="tree01_leafs1" parent="460, 490" begin="565, 725" end="390,390" />
                <treeNode pattern="leafs1" texture="tree01_stick3" parent="685, 515" begin="220, 450" end="335,100" />
            </treeNode>
        </tree>

        <tree width="0.5" left="1.3" right="2.2" bottom="0.03" baseHeight="1400">
            <fallenLeafs pattern="fallenLeafs2" enterPoint="50, 150" maxEnterCount="40" />
            <treeNode pattern="trunk1" texture="tree02_tree2" begin="150, 960">
                <treeNode pattern="stick1" texture="tree02_stick3" parent="233, 740" begin="845, 885" end="625, 470" />
                <treeNode pattern="stick1" texture="tree02_stick6" parent="395, 555" begin="305, 875" end="404, 745">
                    <treeNode pattern="stick1" texture="tree02_stick5" parent="600, 600" begin="88, 67" end="140,135" />
                </treeNode>
                <treeNode pattern="leafs2" texture="tree02_leafs" parent="290, 380" begin="590, 765" end="465, 140" />
            </treeNode>
        </tree>

    </scene>

    
    <scene id="scene03" width="4" dragSlowing=".9">

        <sky textures="back03" width="1.5" />

        <clouds pattern="darkClouds" density="10" speed=".3" top="0.05" bottom="0.9" minScale=".18" maxScale="0.24" opacity=".8" />
        <clouds pattern="darkClouds" density="3" speed=".5" top="-.25" bottom="1" minScale=".3" maxScale="0.5" opacity="1" />

        <wind pattern="wind1"/>

        <ground pattern="land5" width="4" >
            <grass pattern="grass1" textures="grass1a, grass1b, grass1c"
                density="100" begin="12,120" minScale="0.075" maxScale="0.1" />
            <grass pattern="grass1" textures="grass2, grass3, grass4, grass5"
                density="100" begin="32,125" minScale="0.09" maxScale="0.15" />
        </ground>

        <tree width="0.5" left="2.2" right="1.3" bottom="0.04" baseHeight="1024" opacity="1" >
            <fallenLeafs pattern="fallenLeafs1" enterPoint="-120, 200" maxEnterCount="20" opacity=".8" />
            <treeNode pattern="trunk1" texture="tree01_tree1" begin="775, 890" opacity=".93">
                <treeNode pattern="stick1" texture="tree01_stick1" parent="310, 385" begin="785, 125" end="145,195" />
                <treeNode pattern="stick1" texture="tree01_stick2" parent="310, 385" begin="490, 235" end="65,140" />
                <treeNode pattern="leafs1" texture="tree01_leafs1" parent="460, 490" begin="565, 725" end="390,390" />
                <treeNode pattern="leafs1" texture="tree01_stick3" parent="685, 515" begin="220, 450" end="335,100" />
            </treeNode>
        </tree>

        <tree width="0.5" left="1.3" right="2.2" bottom="0.03" baseHeight="1400">
            <fallenLeafs pattern="fallenLeafs2" enterPoint="50, 150" maxEnterCount="40" />
            <treeNode pattern="trunk1" texture="tree02_tree2" begin="150, 960">
                <treeNode pattern="stick1" texture="tree02_stick3" parent="233, 740" begin="845, 885" end="625, 470" />
                <treeNode pattern="stick1" texture="tree02_stick6" parent="395, 555" begin="305, 875" end="404, 745">
                    <treeNode pattern="stick1" texture="tree02_stick5" parent="600, 600" begin="88, 67" end="140,135" />
                </treeNode>
                <treeNode pattern="leafs2" texture="tree02_leafs" parent="290, 380" begin="590, 765" end="465, 140" />
            </treeNode>
        </tree>

    </scene>


</theme>
